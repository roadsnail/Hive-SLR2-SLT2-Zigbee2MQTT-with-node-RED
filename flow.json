[{"id":"c160e681.1fda38","type":"tab","label":"Hive SLR2 (V0.2)","disabled":false,"info":""},{"id":"74096a40.577c64","type":"mqtt in","z":"c160e681.1fda38","name":"","topic":"zigbee2mqtt/Boiler Controller SLR2","qos":"2","broker":"67524c7e.4228a4","x":200,"y":240,"wires":[["3121b73b.09de88"]]},{"id":"3121b73b.09de88","type":"split","z":"c160e681.1fda38","name":"SplitKeys","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"topic","x":220,"y":380,"wires":[["25c46cc2.b36244"]]},{"id":"25c46cc2.b36244","type":"switch","z":"c160e681.1fda38","name":"","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"linkquality","vt":"str"},{"t":"eq","v":"local_temperature_heat","vt":"str"},{"t":"eq","v":"occupied_heating_setpoint_heat","vt":"str"},{"t":"eq","v":"occupied_heating_setpoint_water","vt":"str"},{"t":"eq","v":"running_state_heat","vt":"str"},{"t":"eq","v":"running_state_water","vt":"str"},{"t":"eq","v":"system_mode","vt":"str"},{"t":"eq","v":"temperature_setpoint_hold_heat","vt":"str"},{"t":"eq","v":"temperature_setpoint_hold_water","vt":"str"},{"t":"eq","v":"system_mode_heat","vt":"str"},{"t":"eq","v":"system_mode_water","vt":"str"}],"checkall":"true","repair":false,"outputs":11,"x":410,"y":380,"wires":[["d3cc2976.50eaa8"],["a42136bb.9a3978"],["170542a7.6c597d"],["526da7c8.acc3b8"],["2004e005.696ae"],["5fa34a56.32f774"],["fc9bcf44.829da"],["628e67bd.ec1238"],["5ac0e801.e6ef98"],["90f6a339.27a8a"],["e12d10a9.dc47e"]]},{"id":"a98d6f7b.27f08","type":"ui_gauge","z":"c160e681.1fda38","name":"Thermostat Temp Gauge","group":"528c2d5b.1dbed4","order":1,"width":6,"height":4,"gtype":"gage","title":"Thermostat Temp","label":"","format":"{{local_temperature_heat}}","min":0,"max":"30","colors":["#a9402d","#e6e600","#3acb4a"],"seg1":"17.7","seg2":"20.5","x":250,"y":680,"wires":[]},{"id":"cb61a88e.8678c8","type":"ui_text","z":"c160e681.1fda38","group":"528c2d5b.1dbed4","order":2,"width":6,"height":1,"name":"Thermostat Temp","label":"Thermostat Temp","format":"{{value | number:2}} &deg","layout":"row-spread","x":230,"y":720,"wires":[]},{"id":"51ffbd8f.c89f14","type":"inject","z":"c160e681.1fda38","name":"CH system_mode (payload)","topic":"","payload":"{\"system_mode_heat\": \"\"}","payloadType":"str","repeat":"60","crontab":"","once":false,"onceDelay":"1","x":200,"y":120,"wires":[["457a62f9.47a61c"]]},{"id":"66b014a7.abd61c","type":"ui_text","z":"c160e681.1fda38","group":"f8a0519b.03b43","order":1,"width":6,"height":1,"name":"occupied_heating_setpoint_heat","label":"CH Thermostat Setpoint","format":"{{value}} &deg","layout":"row-spread","x":270,"y":800,"wires":[]},{"id":"c18919ed.cbcdd8","type":"ui_text","z":"c160e681.1fda38","group":"f8a0519b.03b43","order":2,"width":6,"height":1,"name":"running_state_heat","label":"CH State","format":"{{value}}","layout":"row-spread","x":230,"y":960,"wires":[]},{"id":"b3ab6c29.70ba2","type":"ui_text","z":"c160e681.1fda38","group":"b3d99634.37a618","order":1,"width":6,"height":1,"name":"occupied_heating_setpoint_water","label":"HW Thermostat Setting?","format":"{{value}} &deg","layout":"row-spread","x":1160,"y":800,"wires":[]},{"id":"3af30692.67a1ca","type":"ui_text","z":"c160e681.1fda38","group":"b3d99634.37a618","order":2,"width":6,"height":1,"name":"running_state_water","label":"HW State","format":"{{value}}","layout":"row-spread","x":1120,"y":960,"wires":[]},{"id":"fb2bf0e4.ec92","type":"ui_slider","z":"c160e681.1fda38","name":"","label":"CH Thermostat","tooltip":"","group":"528c2d5b.1dbed4","order":4,"width":6,"height":2,"passthru":false,"outs":"end","topic":"","min":"1","max":"30","step":"0.5","x":220,"y":860,"wires":[["8f223093.239c9"]]},{"id":"2fe295dd.44245a","type":"mqtt out","z":"c160e681.1fda38","name":"Controller/heat/set/occupied_heating_setpoint","topic":"zigbee2mqtt/Boiler Controller SLR2/heat/set/occupied_heating_setpoint","qos":"","retain":"","broker":"67524c7e.4228a4","x":1300,"y":240,"wires":[]},{"id":"1dd39593.1761ea","type":"ui_dropdown","z":"c160e681.1fda38","name":"Set System Mode","label":"","tooltip":"","place":"Set System Mode","group":"528c2d5b.1dbed4","order":7,"width":6,"height":1,"passthru":false,"options":[{"label":"Off","value":"off","type":"str"},{"label":"Auto","value":"auto","type":"str"},{"label":"Heat","value":"heat","type":"str"}],"payload":"","topic":"","x":230,"y":1140,"wires":[["63aba5bc.03227c"]]},{"id":"2bd5a634.9da91a","type":"mqtt out","z":"c160e681.1fda38","name":"Controller/heat/set/system_mode","topic":"zigbee2mqtt/Boiler Controller SLR2/heat/set/system_mode","qos":"","retain":"","broker":"67524c7e.4228a4","x":1260,"y":300,"wires":[]},{"id":"d14e13ce.bf28b","type":"ui_text","z":"c160e681.1fda38","group":"528c2d5b.1dbed4","order":6,"width":6,"height":1,"name":"system_mode","label":"system_mode","format":"{{value}}","layout":"row-spread","x":220,"y":1100,"wires":[]},{"id":"1ba2efc3.56ab9","type":"ui_text","z":"c160e681.1fda38","group":"b3d99634.37a618","order":5,"width":6,"height":1,"name":"system_mode_water","label":"system_mode_water","format":"{{value}}","layout":"row-spread","x":1140,"y":1300,"wires":[]},{"id":"1027c7b6.8695c8","type":"ui_text","z":"c160e681.1fda38","group":"f8a0519b.03b43","order":5,"width":6,"height":1,"name":"system_mode_heat","label":"system_mode_heat","format":"{{value}}","layout":"row-spread","x":250,"y":1300,"wires":[]},{"id":"40bcc097.331d8","type":"ui_dropdown","z":"c160e681.1fda38","name":"Set System Mode","label":"","tooltip":"","place":"Set System Heat Mode","group":"f8a0519b.03b43","order":6,"width":6,"height":1,"passthru":false,"options":[{"label":"Off","value":"off","type":"str"},{"label":"Auto","value":"auto","type":"str"},{"label":"Manual","value":"heat","type":"str"}],"payload":"","topic":"","x":250,"y":1340,"wires":[["b1dec657.11c2a8"]]},{"id":"da039b15.576538","type":"ui_dropdown","z":"c160e681.1fda38","name":"Set System Mode","label":"","tooltip":"","place":"Set System WaterMode","group":"b3d99634.37a618","order":6,"width":6,"height":1,"passthru":false,"options":[{"label":"Off","value":"off","type":"str"},{"label":"Auto","value":"auto","type":"str"},{"label":"Heat","value":"heat","type":"str"}],"payload":"","topic":"","x":1130,"y":1340,"wires":[["3fdf4d1.3d3aab2"]]},{"id":"b1dec657.11c2a8","type":"function","z":"c160e681.1fda38","name":"System Heat Payload","func":"var value = msg.payload;\nmsg.payload = {\"system_mode_heat\": value}\nmsg.value = value\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":1340,"wires":[["979ec71b.49d098","bb3bfc12.75f3","594b07bb.46dae8"]]},{"id":"3fdf4d1.3d3aab2","type":"function","z":"c160e681.1fda38","name":"System Water Payload","func":"var value = msg.payload;\nmsg.value = value\nmsg.payload = {\"system_mode_water\": value}\nreturn msg;","outputs":1,"noerr":0,"x":1360,"y":1340,"wires":[["eb872674.8503c8","26fe433d.49311c","6077e990.112278"]]},{"id":"bb3bfc12.75f3","type":"function","z":"c160e681.1fda38","name":"Get CH Mode Payload","func":"var value = msg.payload;\nmsg.payload = {\"system_mode_heat\": \"\"}\nreturn msg;","outputs":1,"noerr":0,"x":260,"y":1420,"wires":[["55e30050.bb7f7"]]},{"id":"26fe433d.49311c","type":"function","z":"c160e681.1fda38","name":"Get HW Mode Payload","func":"var value = msg.payload;\nmsg.payload = {\"system_mode_water\": \"\"}\nreturn msg;","outputs":1,"noerr":0,"x":1140,"y":1420,"wires":[["606c2049.1d6c3"]]},{"id":"f74148d5.1230d8","type":"mqtt out","z":"c160e681.1fda38","name":"Controller/get","topic":"zigbee2mqtt/Boiler Controller SLR2/get","qos":"","retain":"","broker":"67524c7e.4228a4","x":1200,"y":120,"wires":[]},{"id":"eb872674.8503c8","type":"function","z":"c160e681.1fda38","name":"Temperature SP Water Payload","func":"if (msg.value === \"off\") {\n    msg.payload = '{\"temperature_setpoint_hold_water\": \"0\"}';\n} else {\n    msg.payload = '{\"temperature_setpoint_hold_water\": \"1\"}';\n}\nreturn msg;","outputs":1,"noerr":0,"x":1170,"y":1480,"wires":[["c8ca0101.944b4"]]},{"id":"256f4674.2cddca","type":"mqtt out","z":"c160e681.1fda38","name":"Controller/set","topic":"zigbee2mqtt/Boiler Controller SLR2/set","qos":"","retain":"","broker":"67524c7e.4228a4","x":1190,"y":180,"wires":[]},{"id":"a1fc12de.862f3","type":"ui_text","z":"c160e681.1fda38","group":"f8a0519b.03b43","order":4,"width":6,"height":1,"name":"temperature_setpoint_hold_heat","label":"temperature_setpoint_hold_heat","format":"{{value}}","layout":"row-spread","x":270,"y":1000,"wires":[]},{"id":"c922549b.996248","type":"ui_text","z":"c160e681.1fda38","group":"b3d99634.37a618","order":4,"width":6,"height":1,"name":"temperature_setpoint_hold_water","label":"temperature_setpoint_hold_water","format":"{{value}}","layout":"row-spread","x":1160,"y":1000,"wires":[]},{"id":"d3cc2976.50eaa8","type":"ui_text","z":"c160e681.1fda38","group":"528c2d5b.1dbed4","order":3,"width":6,"height":1,"name":"LQI","label":"LQI","format":"{{value}}","layout":"row-spread","x":630,"y":180,"wires":[]},{"id":"979ec71b.49d098","type":"function","z":"c160e681.1fda38","name":"Temperature SP Heat Payload","func":"if (msg.value === \"off\") {\n    msg.payload = '{\"temperature_setpoint_hold_heat\": \"0\"}';\n} else {\n    msg.payload = '{\"temperature_setpoint_hold_heat\": \"1\"}';\n}\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":1480,"wires":[["e46cbede.25fac"]]},{"id":"606c2049.1d6c3","type":"link out","z":"c160e681.1fda38","name":"Controller/get","links":["1d87afd5.ccdf1"],"x":1315,"y":1420,"wires":[]},{"id":"1d87afd5.ccdf1","type":"link in","z":"c160e681.1fda38","name":"Controller/get","links":["606c2049.1d6c3","55e30050.bb7f7","457a62f9.47a61c"],"x":1035,"y":120,"wires":[["f74148d5.1230d8"]]},{"id":"55e30050.bb7f7","type":"link out","z":"c160e681.1fda38","name":"Controller/get","links":["1d87afd5.ccdf1"],"x":415,"y":1420,"wires":[]},{"id":"c8ca0101.944b4","type":"link out","z":"c160e681.1fda38","name":"Controller/set","links":["43a3c9bd.d168c8"],"x":1375,"y":1480,"wires":[]},{"id":"43a3c9bd.d168c8","type":"link in","z":"c160e681.1fda38","name":"Controller/set","links":["c8ca0101.944b4","e46cbede.25fac","6077e990.112278","594b07bb.46dae8"],"x":1035,"y":180,"wires":[["256f4674.2cddca"]]},{"id":"e46cbede.25fac","type":"link out","z":"c160e681.1fda38","name":"Controller/set","links":["43a3c9bd.d168c8"],"x":495,"y":1480,"wires":[]},{"id":"6077e990.112278","type":"link out","z":"c160e681.1fda38","name":"Controller/set","links":["43a3c9bd.d168c8","b1aa1e90.26fee"],"x":1535,"y":1340,"wires":[]},{"id":"594b07bb.46dae8","type":"link out","z":"c160e681.1fda38","name":"Controller/set","links":["43a3c9bd.d168c8"],"x":655,"y":1340,"wires":[]},{"id":"457a62f9.47a61c","type":"link out","z":"c160e681.1fda38","name":"Controller/get","links":["1d87afd5.ccdf1"],"x":415,"y":120,"wires":[]},{"id":"b300775e.af37a8","type":"ui_button","z":"c160e681.1fda38","name":"","group":"f8a0519b.03b43","order":11,"width":0,"height":0,"passthru":false,"label":"CH ON","tooltip":"","color":"","bgcolor":"","icon":"","payload":"heat","payloadType":"str","topic":"","x":180,"y":1600,"wires":[["b1dec657.11c2a8","5cea8d22.ccc524"]]},{"id":"137201ca.fd6cee","type":"ui_button","z":"c160e681.1fda38","name":"","group":"b3d99634.37a618","order":11,"width":0,"height":0,"passthru":false,"label":"HW ON","tooltip":"","color":"","bgcolor":"","icon":"","payload":"heat","payloadType":"str","topic":"","x":1060,"y":1600,"wires":[["3fdf4d1.3d3aab2"]]},{"id":"6bfdbf97.b334b","type":"ui_button","z":"c160e681.1fda38","name":"","group":"b3d99634.37a618","order":12,"width":0,"height":0,"passthru":false,"label":"HW OFF","tooltip":"","color":"","bgcolor":"","icon":"","payload":"off","payloadType":"str","topic":"","x":1060,"y":1640,"wires":[["3fdf4d1.3d3aab2"]]},{"id":"a60383bd.71fff","type":"ui_button","z":"c160e681.1fda38","name":"","group":"f8a0519b.03b43","order":12,"width":0,"height":0,"passthru":false,"label":"CH OFF","tooltip":"","color":"","bgcolor":"","icon":"","payload":"off","payloadType":"str","topic":"","x":180,"y":1640,"wires":[["b1dec657.11c2a8","5cea8d22.ccc524"]]},{"id":"5cea8d22.ccc524","type":"function","z":"c160e681.1fda38","name":"Create Thermostat  Payload","func":"if (msg.payload === \"heat\") {\n    msg.payload = 24;\n} else {\n    msg.payload = 1;\n}\nreturn msg;","outputs":1,"noerr":0,"x":200,"y":1700,"wires":[["7119cb18.705804"]]},{"id":"7119cb18.705804","type":"delay","z":"c160e681.1fda38","name":"Delay Therm Payload","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":480,"y":1700,"wires":[["5a9b0aa5.177984"]]},{"id":"6aaef28f.5095bc","type":"mqtt out","z":"c160e681.1fda38","name":"publish to domoticz/in","topic":"domoticz/in","qos":"","retain":"","broker":"67524c7e.4228a4","x":1460,"y":1800,"wires":[]},{"id":"48fae6a7.52ab08","type":"template","z":"c160e681.1fda38","name":"idx 884 json","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n\"command\" : \"udevice\",\n\"idx\" : 884,\n\"nvalue\" : 0,\n\"svalue\" : \"HiveSP\"\n}","output":"str","x":730,"y":2000,"wires":[["82007a29.ffe2a8"]]},{"id":"939f2d64.02b1b","type":"json","z":"c160e681.1fda38","name":"","property":"payload","action":"","pretty":false,"x":1150,"y":2000,"wires":[["6aaef28f.5095bc"]]},{"id":"55fedbd.6f37e24","type":"change","z":"c160e681.1fda38","name":"","rules":[{"t":"set","p":"HiveSP","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":2000,"wires":[["48fae6a7.52ab08"]]},{"id":"82007a29.ffe2a8","type":"change","z":"c160e681.1fda38","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"HiveSP","fromt":"str","to":"HiveSP","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":2000,"wires":[["939f2d64.02b1b"]]},{"id":"477ae781.02ec48","type":"change","z":"c160e681.1fda38","name":"","rules":[{"t":"set","p":"HW_State","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":2100,"wires":[["944ee0a2.d3f06"]]},{"id":"944ee0a2.d3f06","type":"template","z":"c160e681.1fda38","name":"idx 85 json","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n\"command\" : \"switchlight\",\n\"idx\" : 853,\n\"switchcmd\" : \"HW_State\"\n}","output":"str","x":810,"y":2100,"wires":[["29afb9f6.0dff16"]]},{"id":"29afb9f6.0dff16","type":"change","z":"c160e681.1fda38","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"HW_State","fromt":"str","to":"HW_State","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":1020,"y":2100,"wires":[["25055332.a3a3dc"]]},{"id":"25055332.a3a3dc","type":"json","z":"c160e681.1fda38","name":"","property":"payload","action":"","pretty":false,"x":1210,"y":2100,"wires":[["6aaef28f.5095bc","da6e71e0.3e3c2"]]},{"id":"90f6a339.27a8a","type":"link out","z":"c160e681.1fda38","name":"system_mode_heat","links":["a6cecdae.83bf","fddde02d.ff846"],"x":595,"y":540,"wires":[]},{"id":"e12d10a9.dc47e","type":"link out","z":"c160e681.1fda38","name":"system_mode_water","links":["424a6c0c.10db34"],"x":615,"y":580,"wires":[]},{"id":"a6cecdae.83bf","type":"link in","z":"c160e681.1fda38","name":"system_mode_heat","links":["90f6a339.27a8a"],"x":75,"y":1300,"wires":[["1027c7b6.8695c8","40bcc097.331d8"]]},{"id":"424a6c0c.10db34","type":"link in","z":"c160e681.1fda38","name":"system_mode_water","links":["e12d10a9.dc47e"],"x":955,"y":1300,"wires":[["1ba2efc3.56ab9","da039b15.576538"]]},{"id":"30bd77a9.428b38","type":"link in","z":"c160e681.1fda38","name":"system_mode_water","links":["5fa34a56.32f774"],"x":95,"y":2100,"wires":[["ba7483f.b7db48"]]},{"id":"b4488f8d.cb122","type":"comment","z":"c160e681.1fda38","name":"Domoticz - HW Relay State (switch device idx 853)","info":"","x":270,"y":2060,"wires":[]},{"id":"9e2abe36.1fddc","type":"function","z":"c160e681.1fda38","name":"off/heat -> 0/1","func":"if (msg.payload === \"idle\") {\n    msg.payload = \"Off\";\n} else {\n    msg.payload = \"On\";\n}\nreturn msg","outputs":1,"noerr":0,"x":400,"y":2100,"wires":[["477ae781.02ec48"]]},{"id":"da6e71e0.3e3c2","type":"debug","z":"c160e681.1fda38","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1570,"y":1860,"wires":[]},{"id":"170542a7.6c597d","type":"link out","z":"c160e681.1fda38","name":"occupied_heating_setpoint_heat","links":["d6b47a37.e7ab08","8813c893.bd0e08"],"x":595,"y":260,"wires":[]},{"id":"d6b47a37.e7ab08","type":"link in","z":"c160e681.1fda38","name":"","links":["170542a7.6c597d"],"x":75,"y":840,"wires":[["66b014a7.abd61c","fb2bf0e4.ec92"]]},{"id":"8813c893.bd0e08","type":"link in","z":"c160e681.1fda38","name":"","links":["170542a7.6c597d"],"x":95,"y":2000,"wires":[["57420b0e.0ae194"]]},{"id":"c3c2ea6.2b2ab18","type":"comment","z":"c160e681.1fda38","name":"Domoticz - Hive Thermostat SP (device idx 884)","info":"","x":260,"y":1960,"wires":[]},{"id":"e57f4ac2.bc5e78","type":"function","z":"c160e681.1fda38","name":"off/heat -> 0/1","func":"if (msg.payload === \"idle\") {\n    msg.payload = \"Off\";\n} else {\n    msg.payload = \"On\";\n}\nreturn msg;","outputs":1,"noerr":0,"x":400,"y":2200,"wires":[["1aef1be8.3d2714"]]},{"id":"1aef1be8.3d2714","type":"change","z":"c160e681.1fda38","name":"","rules":[{"t":"set","p":"CH_State","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":2200,"wires":[["a2ebd2bb.550cd"]]},{"id":"a2ebd2bb.550cd","type":"template","z":"c160e681.1fda38","name":"idx 852 json","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n\"command\" : \"switchlight\",\n\"idx\" : 852,\n\"switchcmd\" : \"CH_State\"\n}","output":"str","x":810,"y":2200,"wires":[["b7e99a8b.cb73d8"]]},{"id":"b7e99a8b.cb73d8","type":"change","z":"c160e681.1fda38","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"CH_State","fromt":"str","to":"CH_State","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":1020,"y":2200,"wires":[["9c7559c7.70d588"]]},{"id":"9c7559c7.70d588","type":"json","z":"c160e681.1fda38","name":"","property":"payload","action":"","pretty":false,"x":1210,"y":2200,"wires":[["6aaef28f.5095bc","da6e71e0.3e3c2"]]},{"id":"be351f2b.955df","type":"comment","z":"c160e681.1fda38","name":"Domoticz - CH Relay State (switch device idx 852)","info":"","x":270,"y":2160,"wires":[]},{"id":"2004e005.696ae","type":"link out","z":"c160e681.1fda38","name":"running_state_heat","links":["556edd97.696c74","c4cdb497.064f68"],"x":595,"y":340,"wires":[]},{"id":"556edd97.696c74","type":"link in","z":"c160e681.1fda38","name":"","links":["2004e005.696ae"],"x":75,"y":960,"wires":[["c18919ed.cbcdd8"]]},{"id":"5fa34a56.32f774","type":"link out","z":"c160e681.1fda38","name":"running_state_water","links":["d00b37b5.bd3ec8","30bd77a9.428b38"],"x":615,"y":380,"wires":[]},{"id":"d00b37b5.bd3ec8","type":"link in","z":"c160e681.1fda38","name":"","links":["5fa34a56.32f774"],"x":955,"y":960,"wires":[["3af30692.67a1ca"]]},{"id":"c4cdb497.064f68","type":"link in","z":"c160e681.1fda38","name":"system_mode_water","links":["2004e005.696ae"],"x":95,"y":2200,"wires":[["da543a2a.a2ee28"]]},{"id":"ba7483f.b7db48","type":"rbe","z":"c160e681.1fda38","name":"Change?","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":220,"y":2100,"wires":[["9e2abe36.1fddc"]]},{"id":"da543a2a.a2ee28","type":"rbe","z":"c160e681.1fda38","name":"Change?","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":220,"y":2200,"wires":[["e57f4ac2.bc5e78"]]},{"id":"57420b0e.0ae194","type":"rbe","z":"c160e681.1fda38","name":"Change?","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":220,"y":2000,"wires":[["55fedbd.6f37e24"]]},{"id":"ae372846.9488c8","type":"change","z":"c160e681.1fda38","name":"","rules":[{"t":"set","p":"HiveTemp","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":510,"y":1900,"wires":[["c4fe427b.513d"]]},{"id":"c4fe427b.513d","type":"template","z":"c160e681.1fda38","name":"idx 891 json","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n\"command\" : \"udevice\",\n\"idx\" : 891,\n\"nvalue\" : 0,\n\"svalue\" : \"HiveTemp\"\n}","output":"str","x":730,"y":1900,"wires":[["cedf4f48.5d40f"]]},{"id":"cedf4f48.5d40f","type":"change","z":"c160e681.1fda38","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"HiveTemp","fromt":"str","to":"HiveTemp","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":1900,"wires":[["3761287b.48dfa8"]]},{"id":"3761287b.48dfa8","type":"json","z":"c160e681.1fda38","name":"","property":"payload","action":"","pretty":false,"x":1150,"y":1900,"wires":[["6aaef28f.5095bc"]]},{"id":"a42136bb.9a3978","type":"link out","z":"c160e681.1fda38","name":"local_temperature_heat","links":["d7e42e89.710f5","877d49e9.e952c8"],"x":595,"y":220,"wires":[]},{"id":"d7e42e89.710f5","type":"link in","z":"c160e681.1fda38","name":"","links":["a42136bb.9a3978"],"x":75,"y":700,"wires":[["a98d6f7b.27f08","cb61a88e.8678c8"]]},{"id":"877d49e9.e952c8","type":"link in","z":"c160e681.1fda38","name":"","links":["a42136bb.9a3978"],"x":95,"y":1900,"wires":[["ae372846.9488c8"]]},{"id":"66db4ae.e3898b4","type":"comment","z":"c160e681.1fda38","name":"Domoticz - Hive Temperature (device idx 891)","info":"","x":250,"y":1860,"wires":[]},{"id":"5096aba3.bb9624","type":"comment","z":"c160e681.1fda38","name":"Hive SLR2/SLT2 zigbee2mqtt node-red testing flow (V0.2)","info":"","x":230,"y":40,"wires":[]},{"id":"d352550b.7f7078","type":"comment","z":"c160e681.1fda38","name":"local_temperature_heat","info":"","x":720,"y":220,"wires":[]},{"id":"378fdd69.5f3442","type":"comment","z":"c160e681.1fda38","name":"occupied_heating_setpoint_heat","info":"","x":750,"y":260,"wires":[]},{"id":"944202e1.abafc","type":"comment","z":"c160e681.1fda38","name":"running_state_water","info":"","x":730,"y":380,"wires":[]},{"id":"9ce0067e.be3058","type":"link in","z":"c160e681.1fda38","name":"Controller/heat/set/occupied_heating_setpoint","links":["5a9b0aa5.177984","8f223093.239c9"],"x":1035,"y":240,"wires":[["2fe295dd.44245a"]]},{"id":"5a9b0aa5.177984","type":"link out","z":"c160e681.1fda38","name":"Controller/heat/set/occupied_heating_setpoint","links":["9ce0067e.be3058"],"x":675,"y":1700,"wires":[]},{"id":"8f223093.239c9","type":"link out","z":"c160e681.1fda38","name":"Controller/heat/set/occupied_heating_setpoint","links":["9ce0067e.be3058"],"x":355,"y":860,"wires":[]},{"id":"1b18319e.27aa6e","type":"comment","z":"c160e681.1fda38","name":"running_state_heat","info":"","x":710,"y":340,"wires":[]},{"id":"9e2cf614.8f4d08","type":"comment","z":"c160e681.1fda38","name":"system_mode_heat","info":"","x":710,"y":540,"wires":[]},{"id":"c0888a8b.b796e8","type":"comment","z":"c160e681.1fda38","name":"system_mode_water","info":"","x":730,"y":580,"wires":[]},{"id":"fc9bcf44.829da","type":"link out","z":"c160e681.1fda38","name":"system_mode","links":["3a412682.2af6aa"],"x":595,"y":500,"wires":[]},{"id":"86684f75.6fc0c","type":"comment","z":"c160e681.1fda38","name":"system_mode","info":"","x":690,"y":500,"wires":[]},{"id":"3a412682.2af6aa","type":"link in","z":"c160e681.1fda38","name":"system_mode","links":["fc9bcf44.829da"],"x":75,"y":1100,"wires":[["d14e13ce.bf28b","1dd39593.1761ea"]]},{"id":"628e67bd.ec1238","type":"link out","z":"c160e681.1fda38","name":"temperature_setpoint_hold_heat","links":["9429ee9e.9bec7"],"x":595,"y":420,"wires":[]},{"id":"38ee7ac1.094086","type":"comment","z":"c160e681.1fda38","name":"temperature_setpoint_hold_heat","info":"","x":750,"y":420,"wires":[]},{"id":"5ac0e801.e6ef98","type":"link out","z":"c160e681.1fda38","name":"temperature_setpoint_hold_water","links":["25bb8904.bca8b6"],"x":615,"y":460,"wires":[]},{"id":"fe8a0139.4abbf","type":"comment","z":"c160e681.1fda38","name":"temperature_setpoint_hold_water","info":"","x":770,"y":460,"wires":[]},{"id":"25bb8904.bca8b6","type":"link in","z":"c160e681.1fda38","name":"temperature_setpoint_hold_water","links":["5ac0e801.e6ef98"],"x":955,"y":1000,"wires":[["c922549b.996248"]]},{"id":"9429ee9e.9bec7","type":"link in","z":"c160e681.1fda38","name":"temperature_setpoint_hold_heat","links":["628e67bd.ec1238"],"x":75,"y":1000,"wires":[["a1fc12de.862f3"]]},{"id":"526da7c8.acc3b8","type":"link out","z":"c160e681.1fda38","name":"occupied_heating_setpoint_water","links":["b1aa1e90.26fee"],"x":615,"y":300,"wires":[]},{"id":"a42b96c5.3b4db8","type":"comment","z":"c160e681.1fda38","name":"occupied_heating_setpoint_water","info":"","x":770,"y":300,"wires":[]},{"id":"b1aa1e90.26fee","type":"link in","z":"c160e681.1fda38","name":"occupied_heating_setpoint_water","links":["6077e990.112278","526da7c8.acc3b8"],"x":955,"y":800,"wires":[["b3ab6c29.70ba2"]]},{"id":"4d8e00b0.d1762","type":"comment","z":"c160e681.1fda38","name":"Domoticz device handlers below here - (flows may be removed if Domoticz not used)","info":"","x":370,"y":1800,"wires":[]},{"id":"725bf91d.8cd648","type":"comment","z":"c160e681.1fda38","name":"Heat and Hot Water On/Off buttons - trigger relevant mqqt messages","info":"","x":660,"y":1600,"wires":[]},{"id":"490854ee.725d0c","type":"comment","z":"c160e681.1fda38","name":"CH and HW system_mode","info":"","x":690,"y":1300,"wires":[]},{"id":"c18103f5.e3e67","type":"comment","z":"c160e681.1fda38","name":"Display CH and HW Thermostat Sliders","info":"","x":590,"y":800,"wires":[]},{"id":"1b74e928.e07fa7","type":"comment","z":"c160e681.1fda38","name":"Display Thermostat Temperature Gauge and Value","info":"","x":590,"y":680,"wires":[]},{"id":"ad9e78ef.2a6008","type":"comment","z":"c160e681.1fda38","name":"set system_mode - off/auto/heat","info":"","x":530,"y":1100,"wires":[]},{"id":"1386e54b.c4d8cb","type":"link in","z":"c160e681.1fda38","name":"Controller/heat/set/system_mode","links":["63aba5bc.03227c"],"x":1035,"y":300,"wires":[["2bd5a634.9da91a"]]},{"id":"63aba5bc.03227c","type":"link out","z":"c160e681.1fda38","name":"Controller/heat/set/system_mode","links":["1386e54b.c4d8cb"],"x":375,"y":1140,"wires":[]},{"id":"cc607b78.cda688","type":"comment","z":"c160e681.1fda38","name":"Display CH and HW running_state and temperature_setpoint_hold values","info":"","x":660,"y":960,"wires":[]},{"id":"7e9467a3.4148f8","type":"comment","z":"c160e681.1fda38","name":"mqqt publish topics (set mqqt details here)","info":"","x":1180,"y":60,"wires":[]},{"id":"7b3bcb94.23e084","type":"comment","z":"c160e681.1fda38","name":"mqqt subscribe topics (set mqqt details here)","info":"","x":230,"y":200,"wires":[]},{"id":"67524c7e.4228a4","type":"mqtt-broker","name":"mqtt-broker","broker":"mqtt","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"528c2d5b.1dbed4","type":"ui_group","name":"SLR2/SLT2","tab":"d8350b26.c19d28","order":1,"disp":true,"width":"6","collapse":false},{"id":"f8a0519b.03b43","type":"ui_group","name":"CH","tab":"d8350b26.c19d28","order":2,"disp":true,"width":"6","collapse":false},{"id":"b3d99634.37a618","type":"ui_group","name":"HW","tab":"d8350b26.c19d28","order":3,"disp":true,"width":"6","collapse":false},{"id":"d8350b26.c19d28","type":"ui_tab","name":"CH/HW Controller","icon":"dashboard","order":8,"disabled":false,"hidden":false}]
