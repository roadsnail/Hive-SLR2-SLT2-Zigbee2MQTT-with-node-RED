[{"id":"c049d1cb.b6a87","type":"tab","label":"Hive SLR2 Dev (v0.3)","disabled":false,"info":""},{"id":"664e9ba0.559a54","type":"mqtt in","z":"c049d1cb.b6a87","name":"","topic":"zigbee2mqtt/Boiler Controller SLR2","qos":"2","datatype":"json","broker":"f5594d13.23bec","x":200,"y":220,"wires":[["ce9354d1.5a07d8"]]},{"id":"ce9354d1.5a07d8","type":"split","z":"c049d1cb.b6a87","name":"SplitKeys","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"topic","x":220,"y":380,"wires":[["e211cc95.b69d3"]]},{"id":"e211cc95.b69d3","type":"switch","z":"c049d1cb.b6a87","name":"","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"linkquality","vt":"str"},{"t":"eq","v":"local_temperature_heat","vt":"str"},{"t":"eq","v":"occupied_heating_setpoint_heat","vt":"str"},{"t":"eq","v":"occupied_heating_setpoint_water","vt":"str"},{"t":"eq","v":"running_state_heat","vt":"str"},{"t":"eq","v":"running_state_water","vt":"str"},{"t":"eq","v":"system_mode","vt":"str"},{"t":"eq","v":"temperature_setpoint_hold_heat","vt":"str"},{"t":"eq","v":"temperature_setpoint_hold_water","vt":"str"},{"t":"eq","v":"system_mode_heat","vt":"str"},{"t":"eq","v":"system_mode_water","vt":"str"}],"checkall":"true","repair":false,"outputs":11,"x":410,"y":380,"wires":[["8d012dd6.76326"],["99d8ffc8.2fb55"],["ba98add5.5b13b"],["be18877f.247918"],["1915e6b7.37c2e9"],["2d9d140e.6ca18c"],["21464931.361bd6"],["82290eac.f1bb3"],["41ed1c6a.b5c444"],["93477149.53239"],["ae522577.3aa8d8"]]},{"id":"59c5a2eb.3493fc","type":"ui_gauge","z":"c049d1cb.b6a87","name":"Thermostat Temp Gauge","group":"5e36e134.8d434","order":1,"width":6,"height":4,"gtype":"gage","title":"Thermostat Temp","label":"","format":"{{local_temperature_heat}}","min":0,"max":"30","colors":["#a9402d","#e6e600","#3acb4a"],"seg1":"17.7","seg2":"20.5","x":250,"y":680,"wires":[]},{"id":"93c7dc50.9417c","type":"ui_text","z":"c049d1cb.b6a87","group":"5e36e134.8d434","order":2,"width":6,"height":1,"name":"Thermostat Temp","label":"Thermostat Temp","format":"{{value | number:2}} &deg","layout":"row-spread","x":230,"y":720,"wires":[]},{"id":"d23fae79.aaf42","type":"inject","z":"c049d1cb.b6a87","name":"CH system_mode (payload)","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"60","crontab":"","once":false,"onceDelay":"1","topic":"","payload":"{\"system_mode_heat\": \"\"}","payloadType":"str","x":200,"y":120,"wires":[["fe491697.cfe158"]]},{"id":"4bedd3d3.b85d0c","type":"ui_text","z":"c049d1cb.b6a87","group":"20d8a650.22ff5a","order":1,"width":6,"height":1,"name":"occupied_heating_setpoint_heat","label":"CH Thermostat Setpoint","format":"{{value}} &deg","layout":"row-spread","x":270,"y":800,"wires":[]},{"id":"7308a3d6.421c5c","type":"ui_text","z":"c049d1cb.b6a87","group":"20d8a650.22ff5a","order":2,"width":6,"height":1,"name":"running_state_heat","label":"CH State","format":"{{value}}","layout":"row-spread","x":230,"y":960,"wires":[]},{"id":"d2bbd5d4.eab798","type":"ui_text","z":"c049d1cb.b6a87","group":"370859af.f6e036","order":1,"width":6,"height":1,"name":"occupied_heating_setpoint_water","label":"HW Thermostat Setting?","format":"{{value}} &deg","layout":"row-spread","x":1160,"y":800,"wires":[]},{"id":"90734c63.f061c","type":"ui_text","z":"c049d1cb.b6a87","group":"370859af.f6e036","order":2,"width":6,"height":1,"name":"running_state_water","label":"HW State","format":"{{value}}","layout":"row-spread","x":1120,"y":960,"wires":[]},{"id":"89097f97.fa854","type":"ui_slider","z":"c049d1cb.b6a87","name":"","label":"CH Thermostat","tooltip":"","group":"5e36e134.8d434","order":4,"width":6,"height":2,"passthru":false,"outs":"end","topic":"","min":"1","max":"30","step":"0.5","x":220,"y":860,"wires":[["16c280f2.14b7cf"]]},{"id":"c9dea7a1.7f52e8","type":"mqtt out","z":"c049d1cb.b6a87","name":"Controller/heat/set/occupied_heating_setpoint","topic":"zigbee2mqtt/Boiler Controller SLR2/heat/set/occupied_heating_setpoint","qos":"","retain":"","broker":"f5594d13.23bec","x":1300,"y":240,"wires":[]},{"id":"303368e2.98eda8","type":"ui_dropdown","z":"c049d1cb.b6a87","name":"Set System Mode","label":"","tooltip":"","place":"Set System Mode","group":"5e36e134.8d434","order":7,"width":6,"height":1,"passthru":false,"multiple":false,"options":[{"label":"Off","value":"off","type":"str"},{"label":"Auto","value":"auto","type":"str"},{"label":"Heat","value":"heat","type":"str"}],"payload":"","topic":"","x":230,"y":1140,"wires":[["4234332f.083ffc"]]},{"id":"c236b877.f3e0d8","type":"mqtt out","z":"c049d1cb.b6a87","name":"Controller/heat/set/system_mode","topic":"zigbee2mqtt/Boiler Controller SLR2/heat/set/system_mode","qos":"","retain":"","broker":"f5594d13.23bec","x":1260,"y":300,"wires":[]},{"id":"82110ce0.a7397","type":"ui_text","z":"c049d1cb.b6a87","group":"5e36e134.8d434","order":6,"width":6,"height":1,"name":"system_mode","label":"system_mode","format":"{{value}}","layout":"row-spread","x":220,"y":1100,"wires":[]},{"id":"2923286.68ba0d8","type":"ui_text","z":"c049d1cb.b6a87","group":"370859af.f6e036","order":5,"width":6,"height":1,"name":"system_mode_water","label":"system_mode_water","format":"{{value}}","layout":"row-spread","x":1140,"y":1300,"wires":[]},{"id":"8310b207.a4879","type":"ui_text","z":"c049d1cb.b6a87","group":"20d8a650.22ff5a","order":5,"width":6,"height":1,"name":"system_mode_heat","label":"system_mode_heat","format":"{{value}}","layout":"row-spread","x":250,"y":1300,"wires":[]},{"id":"ec7fe4dc.0dc988","type":"ui_dropdown","z":"c049d1cb.b6a87","name":"Set System Mode","label":"","tooltip":"","place":"Set System Heat Mode","group":"20d8a650.22ff5a","order":6,"width":6,"height":1,"passthru":false,"multiple":false,"options":[{"label":"Off","value":"off","type":"str"},{"label":"Auto","value":"auto","type":"str"},{"label":"Manual","value":"heat","type":"str"}],"payload":"","topic":"","x":250,"y":1340,"wires":[["4332c8cd.428cd8"]]},{"id":"c90fe14c.f7f05","type":"ui_dropdown","z":"c049d1cb.b6a87","name":"Set System Mode","label":"","tooltip":"","place":"Set System WaterMode","group":"370859af.f6e036","order":6,"width":6,"height":1,"passthru":false,"multiple":false,"options":[{"label":"Off","value":"off","type":"str"},{"label":"Auto","value":"auto","type":"str"},{"label":"Heat","value":"heat","type":"str"}],"payload":"","topic":"","x":1130,"y":1340,"wires":[["6081c9d6.18c8e8"]]},{"id":"4332c8cd.428cd8","type":"function","z":"c049d1cb.b6a87","name":"System Heat Payload","func":"var value = msg.payload;\nmsg.payload = {\"system_mode_heat\": value}\nmsg.value = value\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":480,"y":1340,"wires":[["3b03a355.15ba3c","9d0b657d.d3dfd8","1e1e2681.8ab889"]]},{"id":"6081c9d6.18c8e8","type":"function","z":"c049d1cb.b6a87","name":"System Water Payload","func":"var value = msg.payload;\nmsg.value = value\nmsg.payload = {\"system_mode_water\": value}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1360,"y":1340,"wires":[["9349e0e0.2bafc","b436fc93.c426b","abb07ffc.9b72d"]]},{"id":"9d0b657d.d3dfd8","type":"function","z":"c049d1cb.b6a87","name":"Get CH Mode Payload","func":"var value = msg.payload;\nmsg.payload = {\"system_mode_heat\": \"\"}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":260,"y":1420,"wires":[["a6bb18d4.636eb8"]]},{"id":"b436fc93.c426b","type":"function","z":"c049d1cb.b6a87","name":"Get HW Mode Payload","func":"var value = msg.payload;\nmsg.payload = {\"system_mode_water\": \"\"}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1140,"y":1420,"wires":[["669705a1.c5094c"]]},{"id":"48a01ec3.f2871","type":"mqtt out","z":"c049d1cb.b6a87","name":"Controller/get","topic":"zigbee2mqtt/Boiler Controller SLR2/get","qos":"","retain":"","broker":"f5594d13.23bec","x":1200,"y":120,"wires":[],"info":"zigbee2mqtt/Boiler Controller SLR2/heat/set   = topic\n\nthen set on zigbee2mqtt gui works..."},{"id":"9349e0e0.2bafc","type":"function","z":"c049d1cb.b6a87","name":"Temperature SP Water Payload","func":"if (msg.value === \"off\") {\n    msg.payload = '{\"temperature_setpoint_hold_water\": \"0\"}';\n} else {\n    msg.payload = '{\"temperature_setpoint_hold_water\": \"1\"}';\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1170,"y":1480,"wires":[["c3cb379e.eec248"]]},{"id":"7a4f3b9.931bec4","type":"mqtt out","z":"c049d1cb.b6a87","name":"Controller/set","topic":"zigbee2mqtt/Boiler Controller SLR2/set","qos":"","retain":"","broker":"f5594d13.23bec","x":1190,"y":180,"wires":[],"info":"zigbee2mqtt/Boiler Controller SLR2/heat/set   = topic\n\nthen set on zigbee2mqtt gui works..."},{"id":"7a2a1fde.14637","type":"ui_text","z":"c049d1cb.b6a87","group":"20d8a650.22ff5a","order":4,"width":6,"height":1,"name":"temperature_setpoint_hold_heat","label":"temperature_setpoint_hold_heat","format":"{{value}}","layout":"row-spread","x":270,"y":1000,"wires":[]},{"id":"1c2a98c4.2c6a57","type":"ui_text","z":"c049d1cb.b6a87","group":"370859af.f6e036","order":4,"width":6,"height":1,"name":"temperature_setpoint_hold_water","label":"temperature_setpoint_hold_water","format":"{{value}}","layout":"row-spread","x":1160,"y":1000,"wires":[]},{"id":"8d012dd6.76326","type":"ui_text","z":"c049d1cb.b6a87","group":"5e36e134.8d434","order":3,"width":6,"height":1,"name":"LQI","label":"LQI","format":"{{value}}","layout":"row-spread","x":630,"y":180,"wires":[]},{"id":"3b03a355.15ba3c","type":"function","z":"c049d1cb.b6a87","name":"Temperature SP Heat Payload","func":"if (msg.value === \"off\") {\n    msg.payload = '{\"temperature_setpoint_hold_heat\": \"0\"}';\n} else {\n    msg.payload = '{\"temperature_setpoint_hold_heat\": \"1\"}';\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":290,"y":1480,"wires":[["f5fa1d2c.bb8b6"]]},{"id":"669705a1.c5094c","type":"link out","z":"c049d1cb.b6a87","name":"Controller/get","links":["aa296fef.d1a62"],"x":1315,"y":1420,"wires":[]},{"id":"aa296fef.d1a62","type":"link in","z":"c049d1cb.b6a87","name":"Controller/get","links":["669705a1.c5094c","a6bb18d4.636eb8","fe491697.cfe158"],"x":1035,"y":120,"wires":[["48a01ec3.f2871"]]},{"id":"a6bb18d4.636eb8","type":"link out","z":"c049d1cb.b6a87","name":"Controller/get","links":["aa296fef.d1a62"],"x":415,"y":1420,"wires":[]},{"id":"c3cb379e.eec248","type":"link out","z":"c049d1cb.b6a87","name":"Controller/set","links":["a069d98a.931eb8"],"x":1375,"y":1480,"wires":[]},{"id":"a069d98a.931eb8","type":"link in","z":"c049d1cb.b6a87","name":"Controller/set","links":["c3cb379e.eec248","f5fa1d2c.bb8b6","abb07ffc.9b72d","1e1e2681.8ab889"],"x":1035,"y":180,"wires":[["7a4f3b9.931bec4"]]},{"id":"f5fa1d2c.bb8b6","type":"link out","z":"c049d1cb.b6a87","name":"Controller/set","links":["a069d98a.931eb8"],"x":495,"y":1480,"wires":[]},{"id":"abb07ffc.9b72d","type":"link out","z":"c049d1cb.b6a87","name":"Controller/set","links":["a069d98a.931eb8","72491d5.67afee4"],"x":1535,"y":1340,"wires":[]},{"id":"1e1e2681.8ab889","type":"link out","z":"c049d1cb.b6a87","name":"Controller/set","links":["a069d98a.931eb8"],"x":655,"y":1340,"wires":[]},{"id":"fe491697.cfe158","type":"link out","z":"c049d1cb.b6a87","name":"Controller/get","links":["aa296fef.d1a62"],"x":415,"y":120,"wires":[]},{"id":"d00f5c60.e0296","type":"ui_button","z":"c049d1cb.b6a87","name":"","group":"20d8a650.22ff5a","order":11,"width":0,"height":0,"passthru":false,"label":"CH ON","tooltip":"","color":"","bgcolor":"","icon":"","payload":"heat","payloadType":"str","topic":"","x":180,"y":1600,"wires":[["4332c8cd.428cd8","ce3aba6e.c22d88"]]},{"id":"be23c721.0d11b8","type":"ui_button","z":"c049d1cb.b6a87","name":"","group":"370859af.f6e036","order":11,"width":0,"height":0,"passthru":false,"label":"HW ON","tooltip":"","color":"","bgcolor":"","icon":"","payload":"heat","payloadType":"str","topic":"","x":1060,"y":1600,"wires":[["6081c9d6.18c8e8"]]},{"id":"45f48c58.6a4bc4","type":"ui_button","z":"c049d1cb.b6a87","name":"","group":"370859af.f6e036","order":12,"width":0,"height":0,"passthru":false,"label":"HW OFF","tooltip":"","color":"","bgcolor":"","icon":"","payload":"off","payloadType":"str","topic":"","x":1060,"y":1640,"wires":[["6081c9d6.18c8e8"]]},{"id":"bc867e8e.e6098","type":"ui_button","z":"c049d1cb.b6a87","name":"","group":"20d8a650.22ff5a","order":12,"width":0,"height":0,"passthru":false,"label":"CH OFF","tooltip":"","color":"","bgcolor":"","icon":"","payload":"off","payloadType":"str","topic":"","x":180,"y":1640,"wires":[["4332c8cd.428cd8","ce3aba6e.c22d88"]]},{"id":"ce3aba6e.c22d88","type":"function","z":"c049d1cb.b6a87","name":"Create Thermostat  Payload","func":"if (msg.payload === \"heat\") {\n    msg.payload = 24;\n} else {\n    msg.payload = 1;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":200,"y":1700,"wires":[["bb8b7592.b384b8"]]},{"id":"bb8b7592.b384b8","type":"delay","z":"c049d1cb.b6a87","name":"Delay Therm Payload","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":480,"y":1700,"wires":[["1820873e.75d0e9"]]},{"id":"ea24653f.40fbf8","type":"mqtt out","z":"c049d1cb.b6a87","name":"publish to domoticz/in","topic":"domoticz/in","qos":"","retain":"","broker":"f5594d13.23bec","x":1460,"y":1800,"wires":[]},{"id":"3d64fcda.5a2434","type":"template","z":"c049d1cb.b6a87","name":"idx 884 json","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n\"command\" : \"udevice\",\n\"idx\" : 884,\n\"nvalue\" : 0,\n\"svalue\" : \"HiveSP\"\n}","output":"str","x":730,"y":2000,"wires":[["4f07eb54.aef564"]]},{"id":"5b84eb1a.2cadb4","type":"json","z":"c049d1cb.b6a87","name":"","property":"payload","action":"","pretty":false,"x":1150,"y":2000,"wires":[["ea24653f.40fbf8"]]},{"id":"bd7d8db7.7dd49","type":"change","z":"c049d1cb.b6a87","name":"","rules":[{"t":"set","p":"HiveSP","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":2000,"wires":[["3d64fcda.5a2434"]]},{"id":"4f07eb54.aef564","type":"change","z":"c049d1cb.b6a87","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"HiveSP","fromt":"str","to":"HiveSP","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":2000,"wires":[["5b84eb1a.2cadb4"]]},{"id":"3cf1c79d.dabed8","type":"change","z":"c049d1cb.b6a87","name":"","rules":[{"t":"set","p":"HW_State","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":2100,"wires":[["b01f0588.220268"]]},{"id":"b01f0588.220268","type":"template","z":"c049d1cb.b6a87","name":"idx 85 json","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n\"command\" : \"switchlight\",\n\"idx\" : 853,\n\"switchcmd\" : \"HW_State\"\n}","output":"str","x":810,"y":2100,"wires":[["b1557c7b.c69af"]],"info":"old\n\n{\n\"command\" : \"udevice\",\n\"idx\" : 853,\n\"nvalue\" : HW_State,\n\"svalue\" :\"\"\n}"},{"id":"b1557c7b.c69af","type":"change","z":"c049d1cb.b6a87","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"HW_State","fromt":"str","to":"HW_State","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":1020,"y":2100,"wires":[["8661230e.d053d"]]},{"id":"8661230e.d053d","type":"json","z":"c049d1cb.b6a87","name":"","property":"payload","action":"","pretty":false,"x":1210,"y":2100,"wires":[["ea24653f.40fbf8","e1869a15.888a08"]]},{"id":"93477149.53239","type":"link out","z":"c049d1cb.b6a87","name":"system_mode_heat","links":["c2e2e200.2c73e","fddde02d.ff846"],"x":595,"y":540,"wires":[]},{"id":"ae522577.3aa8d8","type":"link out","z":"c049d1cb.b6a87","name":"system_mode_water","links":["48db4049.8e8a1"],"x":615,"y":580,"wires":[]},{"id":"c2e2e200.2c73e","type":"link in","z":"c049d1cb.b6a87","name":"system_mode_heat","links":["93477149.53239"],"x":75,"y":1300,"wires":[["8310b207.a4879","ec7fe4dc.0dc988"]]},{"id":"48db4049.8e8a1","type":"link in","z":"c049d1cb.b6a87","name":"system_mode_water","links":["ae522577.3aa8d8"],"x":955,"y":1300,"wires":[["2923286.68ba0d8","c90fe14c.f7f05"]]},{"id":"93dbb06.ff81b5","type":"link in","z":"c049d1cb.b6a87","name":"running_state_water","links":["2d9d140e.6ca18c"],"x":95,"y":2100,"wires":[["e1c2891c.7639c8"]]},{"id":"5aa72e37.2943e","type":"comment","z":"c049d1cb.b6a87","name":"Domoticz - HW Relay State (switch device idx 853)","info":"","x":270,"y":2060,"wires":[]},{"id":"b194c9c4.6b5588","type":"function","z":"c049d1cb.b6a87","name":"off/heat -> 0/1","func":"if (msg.payload === \"idle\") {\n    msg.payload = \"Off\";\n} else {\n    msg.payload = \"On\";\n}\nreturn msg","outputs":1,"noerr":0,"initialize":"","finalize":"","x":400,"y":2100,"wires":[["3cf1c79d.dabed8"]],"info":"Old\n\nif (msg.payload === \"idle\") {\n    msg.payload = 0;\n} else {\n    msg.payload = 1;\n}\nreturn msg;\n\n\n\nnext\n\nif (msg.payload === \"idle\") {\n    msg.payload = \"Off\";\n} else {\n    msg.payload = \"On\";\n}\nreturn msg;"},{"id":"e1869a15.888a08","type":"debug","z":"c049d1cb.b6a87","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1570,"y":1860,"wires":[]},{"id":"ba98add5.5b13b","type":"link out","z":"c049d1cb.b6a87","name":"occupied_heating_setpoint_heat","links":["d7e3d5a6.1b8258","bf82c9c9.7a2488"],"x":595,"y":260,"wires":[]},{"id":"bf82c9c9.7a2488","type":"link in","z":"c049d1cb.b6a87","name":"occupied_heating_setpoint_heat","links":["ba98add5.5b13b"],"x":75,"y":840,"wires":[["4bedd3d3.b85d0c","89097f97.fa854"]]},{"id":"d7e3d5a6.1b8258","type":"link in","z":"c049d1cb.b6a87","name":"occupied_heating_setpoint_heat","links":["ba98add5.5b13b"],"x":95,"y":2000,"wires":[["f786daf0.a0a498"]]},{"id":"6bdde808.0da2e8","type":"comment","z":"c049d1cb.b6a87","name":"Domoticz - Hive Thermostat SP (device idx 884)","info":"","x":260,"y":1960,"wires":[]},{"id":"bc8f8401.a73fb8","type":"function","z":"c049d1cb.b6a87","name":"off/heat -> 0/1","func":"if (msg.payload === \"idle\") {\n    msg.payload = \"Off\";\n} else {\n    msg.payload = \"On\";\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":400,"y":2200,"wires":[["b46cf0c6.c9819"]]},{"id":"b46cf0c6.c9819","type":"change","z":"c049d1cb.b6a87","name":"","rules":[{"t":"set","p":"CH_State","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":2200,"wires":[["4ec4188d.000c08"]]},{"id":"4ec4188d.000c08","type":"template","z":"c049d1cb.b6a87","name":"idx 852 json","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n\"command\" : \"switchlight\",\n\"idx\" : 852,\n\"switchcmd\" : \"CH_State\"\n}","output":"str","x":810,"y":2200,"wires":[["ee20c325.37bab"]],"info":"Old\n\n{\n\"command\" : \"udevice\",\n\"idx\" : 852,\n\"nvalue\" : CH_State,\n\"svalue\" :\"\"\n}"},{"id":"ee20c325.37bab","type":"change","z":"c049d1cb.b6a87","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"CH_State","fromt":"str","to":"CH_State","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":1020,"y":2200,"wires":[["4d63649f.a790dc"]]},{"id":"4d63649f.a790dc","type":"json","z":"c049d1cb.b6a87","name":"","property":"payload","action":"","pretty":false,"x":1210,"y":2200,"wires":[["ea24653f.40fbf8","e1869a15.888a08"]]},{"id":"f5ecf59.2b13d08","type":"comment","z":"c049d1cb.b6a87","name":"Domoticz - CH Relay State (switch device idx 852)","info":"","x":270,"y":2160,"wires":[]},{"id":"1915e6b7.37c2e9","type":"link out","z":"c049d1cb.b6a87","name":"running_state_heat","links":["3245f848.eb6f08","5af32c85.8dbdf4"],"x":595,"y":340,"wires":[]},{"id":"3245f848.eb6f08","type":"link in","z":"c049d1cb.b6a87","name":"running_state_heat","links":["1915e6b7.37c2e9"],"x":75,"y":960,"wires":[["7308a3d6.421c5c"]]},{"id":"2d9d140e.6ca18c","type":"link out","z":"c049d1cb.b6a87","name":"running_state_water","links":["351a6c56.500574","93dbb06.ff81b5"],"x":615,"y":380,"wires":[]},{"id":"351a6c56.500574","type":"link in","z":"c049d1cb.b6a87","name":"running_state_water","links":["2d9d140e.6ca18c"],"x":955,"y":960,"wires":[["90734c63.f061c"]]},{"id":"5af32c85.8dbdf4","type":"link in","z":"c049d1cb.b6a87","name":"running_state_heat","links":["1915e6b7.37c2e9"],"x":95,"y":2200,"wires":[["6e0801ab.05eb2"]]},{"id":"e1c2891c.7639c8","type":"rbe","z":"c049d1cb.b6a87","name":"Change?","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":220,"y":2100,"wires":[["b194c9c4.6b5588"]]},{"id":"6e0801ab.05eb2","type":"rbe","z":"c049d1cb.b6a87","name":"Change?","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":220,"y":2200,"wires":[["bc8f8401.a73fb8"]]},{"id":"f786daf0.a0a498","type":"rbe","z":"c049d1cb.b6a87","name":"Change?","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":220,"y":2000,"wires":[["bd7d8db7.7dd49"]]},{"id":"fb9cc8c4.2921f8","type":"change","z":"c049d1cb.b6a87","name":"","rules":[{"t":"set","p":"HiveTemp","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":510,"y":1900,"wires":[["7da4618.78c9da"]]},{"id":"7da4618.78c9da","type":"template","z":"c049d1cb.b6a87","name":"idx 891 json","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n\"command\" : \"udevice\",\n\"idx\" : 891,\n\"nvalue\" : 0,\n\"svalue\" : \"HiveTemp\"\n}","output":"str","x":730,"y":1900,"wires":[["7aafc90e.57c428"]]},{"id":"7aafc90e.57c428","type":"change","z":"c049d1cb.b6a87","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"HiveTemp","fromt":"str","to":"HiveTemp","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":1900,"wires":[["93ccfc.cc66b308"]]},{"id":"93ccfc.cc66b308","type":"json","z":"c049d1cb.b6a87","name":"","property":"payload","action":"","pretty":false,"x":1150,"y":1900,"wires":[["ea24653f.40fbf8"]]},{"id":"99d8ffc8.2fb55","type":"link out","z":"c049d1cb.b6a87","name":"local_temperature_heat","links":["764275de.9bd24c","d745cc71.e71da"],"x":595,"y":220,"wires":[]},{"id":"764275de.9bd24c","type":"link in","z":"c049d1cb.b6a87","name":"","links":["99d8ffc8.2fb55"],"x":75,"y":700,"wires":[["59c5a2eb.3493fc","93c7dc50.9417c"]]},{"id":"d745cc71.e71da","type":"link in","z":"c049d1cb.b6a87","name":"local_temperature_heat","links":["99d8ffc8.2fb55"],"x":95,"y":1900,"wires":[["fb9cc8c4.2921f8"]]},{"id":"37436d2d.51c4f2","type":"comment","z":"c049d1cb.b6a87","name":"Domoticz - Hive Temperature (device idx 891)","info":"","x":250,"y":1860,"wires":[]},{"id":"2c2f5d99.26ea32","type":"comment","z":"c049d1cb.b6a87","name":"Hive SLR2/SLT2 zigbee2mqtt node-red testing flow (v0.3)","info":"","x":230,"y":40,"wires":[]},{"id":"889c38.c8b9d3c8","type":"comment","z":"c049d1cb.b6a87","name":"local_temperature_heat","info":"","x":740,"y":220,"wires":[]},{"id":"616fd69c.2e92e8","type":"comment","z":"c049d1cb.b6a87","name":"occupied_heating_setpoint_heat","info":"","x":770,"y":260,"wires":[]},{"id":"f091b122.fd051","type":"comment","z":"c049d1cb.b6a87","name":"running_state_water","info":"","x":750,"y":380,"wires":[]},{"id":"76778dcf.9ccdd4","type":"link in","z":"c049d1cb.b6a87","name":"Controller/heat/set/occupied_heating_setpoint","links":["1820873e.75d0e9","16c280f2.14b7cf"],"x":1035,"y":240,"wires":[["c9dea7a1.7f52e8"]]},{"id":"1820873e.75d0e9","type":"link out","z":"c049d1cb.b6a87","name":"Controller/heat/set/occupied_heating_setpoint","links":["76778dcf.9ccdd4"],"x":675,"y":1700,"wires":[]},{"id":"16c280f2.14b7cf","type":"link out","z":"c049d1cb.b6a87","name":"Controller/heat/set/occupied_heating_setpoint","links":["76778dcf.9ccdd4"],"x":355,"y":860,"wires":[]},{"id":"974c7b33.c5aa98","type":"comment","z":"c049d1cb.b6a87","name":"running_state_heat","info":"","x":730,"y":340,"wires":[]},{"id":"ef537add.cc3078","type":"comment","z":"c049d1cb.b6a87","name":"system_mode_heat","info":"","x":730,"y":540,"wires":[]},{"id":"563ede5c.ed882","type":"comment","z":"c049d1cb.b6a87","name":"system_mode_water","info":"","x":750,"y":580,"wires":[]},{"id":"21464931.361bd6","type":"link out","z":"c049d1cb.b6a87","name":"system_mode","links":["141697eb.9947a8"],"x":595,"y":500,"wires":[]},{"id":"c006016f.3d556","type":"comment","z":"c049d1cb.b6a87","name":"system_mode","info":"","x":710,"y":500,"wires":[]},{"id":"141697eb.9947a8","type":"link in","z":"c049d1cb.b6a87","name":"system_mode","links":["21464931.361bd6"],"x":75,"y":1100,"wires":[["82110ce0.a7397","303368e2.98eda8"]]},{"id":"82290eac.f1bb3","type":"link out","z":"c049d1cb.b6a87","name":"temperature_setpoint_hold_heat","links":["d4b95f90.08ff4"],"x":595,"y":420,"wires":[]},{"id":"f73ff0c2.09058","type":"comment","z":"c049d1cb.b6a87","name":"temperature_setpoint_hold_heat","info":"","x":770,"y":420,"wires":[]},{"id":"41ed1c6a.b5c444","type":"link out","z":"c049d1cb.b6a87","name":"temperature_setpoint_hold_water","links":["d5d090a5.9fdac"],"x":615,"y":460,"wires":[]},{"id":"c6871ae0.e4d348","type":"comment","z":"c049d1cb.b6a87","name":"temperature_setpoint_hold_water","info":"","x":790,"y":460,"wires":[]},{"id":"d5d090a5.9fdac","type":"link in","z":"c049d1cb.b6a87","name":"temperature_setpoint_hold_water","links":["41ed1c6a.b5c444"],"x":955,"y":1000,"wires":[["1c2a98c4.2c6a57"]]},{"id":"d4b95f90.08ff4","type":"link in","z":"c049d1cb.b6a87","name":"temperature_setpoint_hold_heat","links":["82290eac.f1bb3"],"x":75,"y":1000,"wires":[["7a2a1fde.14637"]]},{"id":"be18877f.247918","type":"link out","z":"c049d1cb.b6a87","name":"occupied_heating_setpoint_water","links":["72491d5.67afee4"],"x":615,"y":300,"wires":[]},{"id":"530b0a74.02c4e4","type":"comment","z":"c049d1cb.b6a87","name":"occupied_heating_setpoint_water","info":"","x":790,"y":300,"wires":[]},{"id":"72491d5.67afee4","type":"link in","z":"c049d1cb.b6a87","name":"occupied_heating_setpoint_water","links":["abb07ffc.9b72d","be18877f.247918"],"x":955,"y":800,"wires":[["d2bbd5d4.eab798"]]},{"id":"685e8279.7a090c","type":"comment","z":"c049d1cb.b6a87","name":"Domoticz device handlers below here - (flows may be removed if Domoticz not used)","info":"","x":370,"y":1800,"wires":[]},{"id":"fa856f2c.0410d","type":"comment","z":"c049d1cb.b6a87","name":"Heat and Hot Water On/Off buttons - trigger relevant mqqt messages","info":"","x":660,"y":1600,"wires":[]},{"id":"19797118.2c30af","type":"comment","z":"c049d1cb.b6a87","name":"CH and HW system_mode","info":"","x":690,"y":1300,"wires":[]},{"id":"911feee6.35e25","type":"comment","z":"c049d1cb.b6a87","name":"Display CH and HW Thermostat Sliders","info":"","x":590,"y":800,"wires":[]},{"id":"3ae50b65.ccbbf4","type":"comment","z":"c049d1cb.b6a87","name":"Display Thermostat Temperature Gauge and Value","info":"","x":590,"y":680,"wires":[]},{"id":"90dc5c76.bcfba","type":"comment","z":"c049d1cb.b6a87","name":"set system_mode - off/auto/heat","info":"","x":530,"y":1100,"wires":[]},{"id":"45cd3fe0.a2aea","type":"link in","z":"c049d1cb.b6a87","name":"Controller/heat/set/system_mode","links":["4234332f.083ffc"],"x":1035,"y":300,"wires":[["c236b877.f3e0d8"]]},{"id":"4234332f.083ffc","type":"link out","z":"c049d1cb.b6a87","name":"Controller/heat/set/system_mode","links":["45cd3fe0.a2aea"],"x":375,"y":1140,"wires":[]},{"id":"fbde49f8.52af78","type":"comment","z":"c049d1cb.b6a87","name":"Display CH and HW running_state and temperature_setpoint_hold values","info":"","x":660,"y":960,"wires":[]},{"id":"e96d54a1.257818","type":"comment","z":"c049d1cb.b6a87","name":"mqqt publish topics (set mqqt details here)","info":"","x":1180,"y":60,"wires":[]},{"id":"3b4b0454.b4d5cc","type":"comment","z":"c049d1cb.b6a87","name":"mqqt subscribe topics (set mqqt details here)","info":"","x":230,"y":180,"wires":[]},{"id":"f5594d13.23bec","type":"mqtt-broker","name":"mqtt-broker","broker":"mqtt","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"5e36e134.8d434","type":"ui_group","name":"SLR2/SLT2","tab":"8e7d6bfd.e7b288","order":1,"disp":true,"width":"6","collapse":false},{"id":"20d8a650.22ff5a","type":"ui_group","name":"CH","tab":"8e7d6bfd.e7b288","order":2,"disp":true,"width":"6","collapse":false},{"id":"370859af.f6e036","type":"ui_group","name":"HW","tab":"8e7d6bfd.e7b288","order":3,"disp":true,"width":"6","collapse":false},{"id":"8e7d6bfd.e7b288","type":"ui_tab","name":"CH/HW Controller","icon":"dashboard","order":8,"disabled":false,"hidden":false}]
