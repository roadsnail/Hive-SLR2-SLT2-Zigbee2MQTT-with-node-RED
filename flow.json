[{"id":"fee7e1b3.12649","type":"tab","label":"Hive SLR2 (V0.3)","disabled":false,"info":""},{"id":"fe327027.5b65e","type":"mqtt in","z":"fee7e1b3.12649","name":"","topic":"zigbee2mqtt/Boiler Controller SLR2","qos":"2","broker":"67524c7e.4228a4","x":200,"y":240,"wires":[["18c451ec.0633ee"]]},{"id":"18c451ec.0633ee","type":"split","z":"fee7e1b3.12649","name":"SplitKeys","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"topic","x":220,"y":380,"wires":[["8fc744d2.d26578"]]},{"id":"8fc744d2.d26578","type":"switch","z":"fee7e1b3.12649","name":"","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"linkquality","vt":"str"},{"t":"eq","v":"local_temperature_heat","vt":"str"},{"t":"eq","v":"occupied_heating_setpoint_heat","vt":"str"},{"t":"eq","v":"occupied_heating_setpoint_water","vt":"str"},{"t":"eq","v":"running_state_heat","vt":"str"},{"t":"eq","v":"running_state_water","vt":"str"},{"t":"eq","v":"system_mode","vt":"str"},{"t":"eq","v":"temperature_setpoint_hold_heat","vt":"str"},{"t":"eq","v":"temperature_setpoint_hold_water","vt":"str"},{"t":"eq","v":"system_mode_heat","vt":"str"},{"t":"eq","v":"system_mode_water","vt":"str"}],"checkall":"true","repair":false,"outputs":11,"x":410,"y":380,"wires":[["aaa9be5d.b02ff"],["38e58bd7.26a7c4"],["64a2a977.22c658"],["abcead2a.50ca5"],["fd1648fb.6a96b8"],["22ca730b.e5842c"],["d585d1b6.0ac7"],["b0467163.9f43b"],["6facb141.0b139"],["eaad1e9.9fd64e"],["e6c8395c.7e86d8"]]},{"id":"d1f1ba8e.13d668","type":"ui_gauge","z":"fee7e1b3.12649","name":"Thermostat Temp Gauge","group":"528c2d5b.1dbed4","order":1,"width":6,"height":4,"gtype":"gage","title":"Thermostat Temp","label":"","format":"{{local_temperature_heat}}","min":0,"max":"30","colors":["#a9402d","#e6e600","#3acb4a"],"seg1":"17.7","seg2":"20.5","x":250,"y":680,"wires":[]},{"id":"663a0870.b377f8","type":"ui_text","z":"fee7e1b3.12649","group":"528c2d5b.1dbed4","order":2,"width":6,"height":1,"name":"Thermostat Temp","label":"Thermostat Temp","format":"{{value | number:2}} &deg","layout":"row-spread","x":230,"y":720,"wires":[]},{"id":"be0d579.4a981a8","type":"inject","z":"fee7e1b3.12649","name":"CH system_mode (payload)","topic":"","payload":"{\"system_mode_heat\": \"\"}","payloadType":"str","repeat":"60","crontab":"","once":false,"onceDelay":"1","x":200,"y":120,"wires":[["db0ccce6.17e8e"]]},{"id":"8d526dc1.83b9d","type":"ui_text","z":"fee7e1b3.12649","group":"f8a0519b.03b43","order":1,"width":6,"height":1,"name":"occupied_heating_setpoint_heat","label":"CH Thermostat Setpoint","format":"{{value}} &deg","layout":"row-spread","x":270,"y":800,"wires":[]},{"id":"f954bcff.d339b","type":"ui_text","z":"fee7e1b3.12649","group":"f8a0519b.03b43","order":2,"width":6,"height":1,"name":"running_state_heat","label":"CH State","format":"{{value}}","layout":"row-spread","x":230,"y":960,"wires":[]},{"id":"c899fd79.7592f","type":"ui_text","z":"fee7e1b3.12649","group":"b3d99634.37a618","order":1,"width":6,"height":1,"name":"occupied_heating_setpoint_water","label":"HW Thermostat Setting?","format":"{{value}} &deg","layout":"row-spread","x":1160,"y":800,"wires":[]},{"id":"a35ce325.8018","type":"ui_text","z":"fee7e1b3.12649","group":"b3d99634.37a618","order":2,"width":6,"height":1,"name":"running_state_water","label":"HW State","format":"{{value}}","layout":"row-spread","x":1120,"y":960,"wires":[]},{"id":"5f81be69.29aa3","type":"ui_slider","z":"fee7e1b3.12649","name":"","label":"CH Thermostat","tooltip":"","group":"528c2d5b.1dbed4","order":4,"width":6,"height":2,"passthru":false,"outs":"end","topic":"","min":"1","max":"30","step":"0.5","x":220,"y":860,"wires":[["5e412de0.e28344"]]},{"id":"5cf546db.327e28","type":"mqtt out","z":"fee7e1b3.12649","name":"Controller/heat/set/occupied_heating_setpoint","topic":"zigbee2mqtt/Boiler Controller SLR2/heat/set/occupied_heating_setpoint","qos":"","retain":"","broker":"67524c7e.4228a4","x":1300,"y":240,"wires":[]},{"id":"ab8e108b.adbd","type":"ui_dropdown","z":"fee7e1b3.12649","name":"Set System Mode","label":"","tooltip":"","place":"Set System Mode","group":"528c2d5b.1dbed4","order":7,"width":6,"height":1,"passthru":false,"options":[{"label":"Off","value":"off","type":"str"},{"label":"Auto","value":"auto","type":"str"},{"label":"Heat","value":"heat","type":"str"}],"payload":"","topic":"","x":230,"y":1140,"wires":[["d4c85c03.5c295"]]},{"id":"d31ec248.f8c05","type":"mqtt out","z":"fee7e1b3.12649","name":"Controller/heat/set/system_mode","topic":"zigbee2mqtt/Boiler Controller SLR2/heat/set/system_mode","qos":"","retain":"","broker":"67524c7e.4228a4","x":1260,"y":300,"wires":[]},{"id":"e5e8133b.0c12f","type":"ui_text","z":"fee7e1b3.12649","group":"528c2d5b.1dbed4","order":6,"width":6,"height":1,"name":"system_mode","label":"system_mode","format":"{{value}}","layout":"row-spread","x":220,"y":1100,"wires":[]},{"id":"1c31d656.7206ea","type":"ui_text","z":"fee7e1b3.12649","group":"b3d99634.37a618","order":5,"width":6,"height":1,"name":"system_mode_water","label":"system_mode_water","format":"{{value}}","layout":"row-spread","x":1140,"y":1300,"wires":[]},{"id":"3b040386.806ffc","type":"ui_text","z":"fee7e1b3.12649","group":"f8a0519b.03b43","order":5,"width":6,"height":1,"name":"system_mode_heat","label":"system_mode_heat","format":"{{value}}","layout":"row-spread","x":250,"y":1300,"wires":[]},{"id":"8dd7b156.37167","type":"ui_dropdown","z":"fee7e1b3.12649","name":"Set System Mode","label":"","tooltip":"","place":"Set System Heat Mode","group":"f8a0519b.03b43","order":6,"width":6,"height":1,"passthru":false,"options":[{"label":"Off","value":"off","type":"str"},{"label":"Auto","value":"auto","type":"str"},{"label":"Manual","value":"heat","type":"str"}],"payload":"","topic":"","x":250,"y":1340,"wires":[["3617070.e1fd0fa"]]},{"id":"b944741f.75f688","type":"ui_dropdown","z":"fee7e1b3.12649","name":"Set System Mode","label":"","tooltip":"","place":"Set System WaterMode","group":"b3d99634.37a618","order":6,"width":6,"height":1,"passthru":false,"options":[{"label":"Off","value":"off","type":"str"},{"label":"Auto","value":"auto","type":"str"},{"label":"Heat","value":"heat","type":"str"}],"payload":"","topic":"","x":1130,"y":1340,"wires":[["39e59d08.47a322"]]},{"id":"3617070.e1fd0fa","type":"function","z":"fee7e1b3.12649","name":"System Heat Payload","func":"var value = msg.payload;\nmsg.payload = {\"system_mode_heat\": value}\nmsg.value = value\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":1340,"wires":[["fab99289.21bac","e7bde1ba.8a655","b78200a7.bd504"]]},{"id":"39e59d08.47a322","type":"function","z":"fee7e1b3.12649","name":"System Water Payload","func":"var value = msg.payload;\nmsg.value = value\nmsg.payload = {\"system_mode_water\": value}\nreturn msg;","outputs":1,"noerr":0,"x":1360,"y":1340,"wires":[["55b1efc3.e1bc1","eec11061.43468","1e77e24b.36c2ee"]]},{"id":"e7bde1ba.8a655","type":"function","z":"fee7e1b3.12649","name":"Get CH Mode Payload","func":"var value = msg.payload;\nmsg.payload = {\"system_mode_heat\": \"\"}\nreturn msg;","outputs":1,"noerr":0,"x":260,"y":1420,"wires":[["a1bb2220.88925"]]},{"id":"eec11061.43468","type":"function","z":"fee7e1b3.12649","name":"Get HW Mode Payload","func":"var value = msg.payload;\nmsg.payload = {\"system_mode_water\": \"\"}\nreturn msg;","outputs":1,"noerr":0,"x":1140,"y":1420,"wires":[["2dc998fc.856e98"]]},{"id":"5aeb12a7.d4e4dc","type":"mqtt out","z":"fee7e1b3.12649","name":"Controller/get","topic":"zigbee2mqtt/Boiler Controller SLR2/get","qos":"","retain":"","broker":"67524c7e.4228a4","x":1200,"y":120,"wires":[]},{"id":"55b1efc3.e1bc1","type":"function","z":"fee7e1b3.12649","name":"Temperature SP Water Payload","func":"if (msg.value === \"off\") {\n    msg.payload = '{\"temperature_setpoint_hold_water\": \"0\"}';\n} else {\n    msg.payload = '{\"temperature_setpoint_hold_water\": \"1\"}';\n}\nreturn msg;","outputs":1,"noerr":0,"x":1170,"y":1480,"wires":[["d01cc3db.b05a9"]]},{"id":"63d760d9.b75ca","type":"mqtt out","z":"fee7e1b3.12649","name":"Controller/set","topic":"zigbee2mqtt/Boiler Controller SLR2/set","qos":"","retain":"","broker":"67524c7e.4228a4","x":1190,"y":180,"wires":[]},{"id":"909ad94e.680018","type":"ui_text","z":"fee7e1b3.12649","group":"f8a0519b.03b43","order":4,"width":6,"height":1,"name":"temperature_setpoint_hold_heat","label":"temperature_setpoint_hold_heat","format":"{{value}}","layout":"row-spread","x":270,"y":1000,"wires":[]},{"id":"149e49d0.927566","type":"ui_text","z":"fee7e1b3.12649","group":"b3d99634.37a618","order":4,"width":6,"height":1,"name":"temperature_setpoint_hold_water","label":"temperature_setpoint_hold_water","format":"{{value}}","layout":"row-spread","x":1160,"y":1000,"wires":[]},{"id":"aaa9be5d.b02ff","type":"ui_text","z":"fee7e1b3.12649","group":"528c2d5b.1dbed4","order":3,"width":6,"height":1,"name":"LQI","label":"LQI","format":"{{value}}","layout":"row-spread","x":630,"y":180,"wires":[]},{"id":"fab99289.21bac","type":"function","z":"fee7e1b3.12649","name":"Temperature SP Heat Payload","func":"if (msg.value === \"off\") {\n    msg.payload = '{\"temperature_setpoint_hold_heat\": \"0\"}';\n} else {\n    msg.payload = '{\"temperature_setpoint_hold_heat\": \"1\"}';\n}\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":1480,"wires":[["fa4ff9d6.8903b8"]]},{"id":"2dc998fc.856e98","type":"link out","z":"fee7e1b3.12649","name":"Controller/get","links":["9c67c496.92e2d8"],"x":1315,"y":1420,"wires":[]},{"id":"9c67c496.92e2d8","type":"link in","z":"fee7e1b3.12649","name":"Controller/get","links":["2dc998fc.856e98","a1bb2220.88925","db0ccce6.17e8e"],"x":1035,"y":120,"wires":[["5aeb12a7.d4e4dc"]]},{"id":"a1bb2220.88925","type":"link out","z":"fee7e1b3.12649","name":"Controller/get","links":["9c67c496.92e2d8"],"x":415,"y":1420,"wires":[]},{"id":"d01cc3db.b05a9","type":"link out","z":"fee7e1b3.12649","name":"Controller/set","links":["c1129b61.a97258"],"x":1375,"y":1480,"wires":[]},{"id":"c1129b61.a97258","type":"link in","z":"fee7e1b3.12649","name":"Controller/set","links":["d01cc3db.b05a9","fa4ff9d6.8903b8","1e77e24b.36c2ee","b78200a7.bd504"],"x":1035,"y":180,"wires":[["63d760d9.b75ca"]]},{"id":"fa4ff9d6.8903b8","type":"link out","z":"fee7e1b3.12649","name":"Controller/set","links":["c1129b61.a97258"],"x":495,"y":1480,"wires":[]},{"id":"1e77e24b.36c2ee","type":"link out","z":"fee7e1b3.12649","name":"Controller/set","links":["c1129b61.a97258","8ff8d951.4ff978"],"x":1535,"y":1340,"wires":[]},{"id":"b78200a7.bd504","type":"link out","z":"fee7e1b3.12649","name":"Controller/set","links":["c1129b61.a97258"],"x":655,"y":1340,"wires":[]},{"id":"db0ccce6.17e8e","type":"link out","z":"fee7e1b3.12649","name":"Controller/get","links":["9c67c496.92e2d8"],"x":415,"y":120,"wires":[]},{"id":"23bdfc9f.424f54","type":"ui_button","z":"fee7e1b3.12649","name":"","group":"f8a0519b.03b43","order":11,"width":0,"height":0,"passthru":false,"label":"CH ON","tooltip":"","color":"","bgcolor":"","icon":"","payload":"heat","payloadType":"str","topic":"","x":180,"y":1600,"wires":[["3617070.e1fd0fa","77ce444c.ce20bc"]]},{"id":"6650c53e.5cc15c","type":"ui_button","z":"fee7e1b3.12649","name":"","group":"b3d99634.37a618","order":11,"width":0,"height":0,"passthru":false,"label":"HW ON","tooltip":"","color":"","bgcolor":"","icon":"","payload":"heat","payloadType":"str","topic":"","x":1060,"y":1600,"wires":[["39e59d08.47a322"]]},{"id":"fa5e1f7f.6baa4","type":"ui_button","z":"fee7e1b3.12649","name":"","group":"b3d99634.37a618","order":12,"width":0,"height":0,"passthru":false,"label":"HW OFF","tooltip":"","color":"","bgcolor":"","icon":"","payload":"off","payloadType":"str","topic":"","x":1060,"y":1640,"wires":[["39e59d08.47a322"]]},{"id":"abb2846f.cc6d98","type":"ui_button","z":"fee7e1b3.12649","name":"","group":"f8a0519b.03b43","order":12,"width":0,"height":0,"passthru":false,"label":"CH OFF","tooltip":"","color":"","bgcolor":"","icon":"","payload":"off","payloadType":"str","topic":"","x":180,"y":1640,"wires":[["3617070.e1fd0fa","77ce444c.ce20bc"]]},{"id":"77ce444c.ce20bc","type":"function","z":"fee7e1b3.12649","name":"Create Thermostat  Payload","func":"if (msg.payload === \"heat\") {\n    msg.payload = 24;\n} else {\n    msg.payload = 1;\n}\nreturn msg;","outputs":1,"noerr":0,"x":200,"y":1700,"wires":[["41a8813c.66b5f"]]},{"id":"41a8813c.66b5f","type":"delay","z":"fee7e1b3.12649","name":"Delay Therm Payload","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":480,"y":1700,"wires":[["c34912a2.8e132"]]},{"id":"cf5083f2.9d6ac","type":"mqtt out","z":"fee7e1b3.12649","name":"publish to domoticz/in","topic":"domoticz/in","qos":"","retain":"","broker":"67524c7e.4228a4","x":1460,"y":1800,"wires":[]},{"id":"fa5dc6e9.50a908","type":"template","z":"fee7e1b3.12649","name":"idx 884 json","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n\"command\" : \"udevice\",\n\"idx\" : 884,\n\"nvalue\" : 0,\n\"svalue\" : \"HiveSP\"\n}","output":"str","x":730,"y":2000,"wires":[["c47ce5ab.c76af8"]]},{"id":"8d0b5170.7f125","type":"json","z":"fee7e1b3.12649","name":"","property":"payload","action":"","pretty":false,"x":1150,"y":2000,"wires":[["cf5083f2.9d6ac"]]},{"id":"9cb24fd8.2d153","type":"change","z":"fee7e1b3.12649","name":"","rules":[{"t":"set","p":"HiveSP","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":2000,"wires":[["fa5dc6e9.50a908"]]},{"id":"c47ce5ab.c76af8","type":"change","z":"fee7e1b3.12649","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"HiveSP","fromt":"str","to":"HiveSP","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":2000,"wires":[["8d0b5170.7f125"]]},{"id":"4c01402a.538ac","type":"change","z":"fee7e1b3.12649","name":"","rules":[{"t":"set","p":"HW_State","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":2100,"wires":[["5bbfd7a8.28ac38"]]},{"id":"5bbfd7a8.28ac38","type":"template","z":"fee7e1b3.12649","name":"idx 85 json","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n\"command\" : \"switchlight\",\n\"idx\" : 853,\n\"switchcmd\" : \"HW_State\"\n}","output":"str","x":810,"y":2100,"wires":[["bcad8756.698898"]]},{"id":"bcad8756.698898","type":"change","z":"fee7e1b3.12649","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"HW_State","fromt":"str","to":"HW_State","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":1020,"y":2100,"wires":[["46506b43.3e3fb4"]]},{"id":"46506b43.3e3fb4","type":"json","z":"fee7e1b3.12649","name":"","property":"payload","action":"","pretty":false,"x":1210,"y":2100,"wires":[["cf5083f2.9d6ac","85f62028.dcda"]]},{"id":"eaad1e9.9fd64e","type":"link out","z":"fee7e1b3.12649","name":"system_mode_heat","links":["28b1d382.7dec9c","fddde02d.ff846"],"x":595,"y":540,"wires":[]},{"id":"e6c8395c.7e86d8","type":"link out","z":"fee7e1b3.12649","name":"system_mode_water","links":["3c40a5e5.360f6a"],"x":615,"y":580,"wires":[]},{"id":"28b1d382.7dec9c","type":"link in","z":"fee7e1b3.12649","name":"system_mode_heat","links":["eaad1e9.9fd64e"],"x":75,"y":1300,"wires":[["3b040386.806ffc","8dd7b156.37167"]]},{"id":"3c40a5e5.360f6a","type":"link in","z":"fee7e1b3.12649","name":"system_mode_water","links":["e6c8395c.7e86d8"],"x":955,"y":1300,"wires":[["1c31d656.7206ea","b944741f.75f688"]]},{"id":"95b3cb02.efba58","type":"link in","z":"fee7e1b3.12649","name":"system_mode_water","links":["22ca730b.e5842c"],"x":95,"y":2100,"wires":[["7634a49d.ea29bc"]]},{"id":"cbd052c4.7b01a","type":"comment","z":"fee7e1b3.12649","name":"Domoticz - HW Relay State (switch device idx 853)","info":"","x":270,"y":2060,"wires":[]},{"id":"5a175209.8fb23c","type":"function","z":"fee7e1b3.12649","name":"off/heat -> 0/1","func":"if (msg.payload === \"idle\") {\n    msg.payload = \"Off\";\n} else {\n    msg.payload = \"On\";\n}\nreturn msg","outputs":1,"noerr":0,"x":400,"y":2100,"wires":[["4c01402a.538ac"]]},{"id":"85f62028.dcda","type":"debug","z":"fee7e1b3.12649","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1570,"y":1860,"wires":[]},{"id":"64a2a977.22c658","type":"link out","z":"fee7e1b3.12649","name":"occupied_heating_setpoint_heat","links":["7dd14b39.8d9454","d6237b9e.cb0768"],"x":595,"y":260,"wires":[]},{"id":"7dd14b39.8d9454","type":"link in","z":"fee7e1b3.12649","name":"","links":["64a2a977.22c658"],"x":75,"y":840,"wires":[["8d526dc1.83b9d","5f81be69.29aa3"]]},{"id":"d6237b9e.cb0768","type":"link in","z":"fee7e1b3.12649","name":"","links":["64a2a977.22c658"],"x":95,"y":2000,"wires":[["ad16110f.cebf4"]]},{"id":"141eb780.c58569","type":"comment","z":"fee7e1b3.12649","name":"Domoticz - Hive Thermostat SP (device idx 884)","info":"","x":260,"y":1960,"wires":[]},{"id":"ac1cc2dc.96c18","type":"function","z":"fee7e1b3.12649","name":"off/heat -> 0/1","func":"if (msg.payload === \"idle\") {\n    msg.payload = \"Off\";\n} else {\n    msg.payload = \"On\";\n}\nreturn msg;","outputs":1,"noerr":0,"x":400,"y":2200,"wires":[["f902ee82.088b2"]]},{"id":"f902ee82.088b2","type":"change","z":"fee7e1b3.12649","name":"","rules":[{"t":"set","p":"CH_State","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":2200,"wires":[["3c1cc8d2.c97fa8"]]},{"id":"3c1cc8d2.c97fa8","type":"template","z":"fee7e1b3.12649","name":"idx 852 json","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n\"command\" : \"switchlight\",\n\"idx\" : 852,\n\"switchcmd\" : \"CH_State\"\n}","output":"str","x":810,"y":2200,"wires":[["bf41a0f5.0086a"]]},{"id":"bf41a0f5.0086a","type":"change","z":"fee7e1b3.12649","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"CH_State","fromt":"str","to":"CH_State","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":1020,"y":2200,"wires":[["acf99e5f.9c765"]]},{"id":"acf99e5f.9c765","type":"json","z":"fee7e1b3.12649","name":"","property":"payload","action":"","pretty":false,"x":1210,"y":2200,"wires":[["cf5083f2.9d6ac","85f62028.dcda"]]},{"id":"2c5c4080.9c92","type":"comment","z":"fee7e1b3.12649","name":"Domoticz - CH Relay State (switch device idx 852)","info":"","x":270,"y":2160,"wires":[]},{"id":"fd1648fb.6a96b8","type":"link out","z":"fee7e1b3.12649","name":"running_state_heat","links":["5a584f16.ca05c","16f0db8d.6b5964"],"x":595,"y":340,"wires":[]},{"id":"5a584f16.ca05c","type":"link in","z":"fee7e1b3.12649","name":"","links":["fd1648fb.6a96b8"],"x":75,"y":960,"wires":[["f954bcff.d339b"]]},{"id":"22ca730b.e5842c","type":"link out","z":"fee7e1b3.12649","name":"running_state_water","links":["2e744c65.6300e4","95b3cb02.efba58"],"x":615,"y":380,"wires":[]},{"id":"2e744c65.6300e4","type":"link in","z":"fee7e1b3.12649","name":"","links":["22ca730b.e5842c"],"x":955,"y":960,"wires":[["a35ce325.8018"]]},{"id":"16f0db8d.6b5964","type":"link in","z":"fee7e1b3.12649","name":"system_mode_water","links":["fd1648fb.6a96b8"],"x":95,"y":2200,"wires":[["5c9f4a79.596ad4"]]},{"id":"7634a49d.ea29bc","type":"rbe","z":"fee7e1b3.12649","name":"Change?","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":220,"y":2100,"wires":[["5a175209.8fb23c"]]},{"id":"5c9f4a79.596ad4","type":"rbe","z":"fee7e1b3.12649","name":"Change?","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":220,"y":2200,"wires":[["ac1cc2dc.96c18"]]},{"id":"ad16110f.cebf4","type":"rbe","z":"fee7e1b3.12649","name":"Change?","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":220,"y":2000,"wires":[["9cb24fd8.2d153"]]},{"id":"f1042801.291308","type":"change","z":"fee7e1b3.12649","name":"","rules":[{"t":"set","p":"HiveTemp","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":510,"y":1900,"wires":[["bc46bdc0.ed0f3"]]},{"id":"bc46bdc0.ed0f3","type":"template","z":"fee7e1b3.12649","name":"idx 891 json","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{\n\"command\" : \"udevice\",\n\"idx\" : 891,\n\"nvalue\" : 0,\n\"svalue\" : \"HiveTemp\"\n}","output":"str","x":730,"y":1900,"wires":[["789c166c.44ae28"]]},{"id":"789c166c.44ae28","type":"change","z":"fee7e1b3.12649","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"HiveTemp","fromt":"str","to":"HiveTemp","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":1900,"wires":[["ab5632df.6e9fd"]]},{"id":"ab5632df.6e9fd","type":"json","z":"fee7e1b3.12649","name":"","property":"payload","action":"","pretty":false,"x":1150,"y":1900,"wires":[["cf5083f2.9d6ac"]]},{"id":"38e58bd7.26a7c4","type":"link out","z":"fee7e1b3.12649","name":"local_temperature_heat","links":["44584bb0.931e94","ff620707.c09058"],"x":595,"y":220,"wires":[]},{"id":"44584bb0.931e94","type":"link in","z":"fee7e1b3.12649","name":"","links":["38e58bd7.26a7c4"],"x":75,"y":700,"wires":[["d1f1ba8e.13d668","663a0870.b377f8"]]},{"id":"ff620707.c09058","type":"link in","z":"fee7e1b3.12649","name":"","links":["38e58bd7.26a7c4"],"x":95,"y":1900,"wires":[["f1042801.291308"]]},{"id":"394a9105.a7b57e","type":"comment","z":"fee7e1b3.12649","name":"Domoticz - Hive Temperature (device idx 891)","info":"","x":250,"y":1860,"wires":[]},{"id":"ebc5185b.f01568","type":"comment","z":"fee7e1b3.12649","name":"Hive SLR2/SLT2 zigbee2mqtt node-red testing flow (V0.3)","info":"","x":230,"y":40,"wires":[]},{"id":"a72466eb.afe928","type":"comment","z":"fee7e1b3.12649","name":"local_temperature_heat","info":"","x":720,"y":220,"wires":[]},{"id":"ae7745c5.7dc308","type":"comment","z":"fee7e1b3.12649","name":"occupied_heating_setpoint_heat","info":"","x":750,"y":260,"wires":[]},{"id":"ff49ffec.36668","type":"comment","z":"fee7e1b3.12649","name":"running_state_water","info":"","x":730,"y":380,"wires":[]},{"id":"6d280a78.c009d4","type":"link in","z":"fee7e1b3.12649","name":"Controller/heat/set/occupied_heating_setpoint","links":["c34912a2.8e132","5e412de0.e28344"],"x":1035,"y":240,"wires":[["5cf546db.327e28"]]},{"id":"c34912a2.8e132","type":"link out","z":"fee7e1b3.12649","name":"Controller/heat/set/occupied_heating_setpoint","links":["6d280a78.c009d4"],"x":675,"y":1700,"wires":[]},{"id":"5e412de0.e28344","type":"link out","z":"fee7e1b3.12649","name":"Controller/heat/set/occupied_heating_setpoint","links":["6d280a78.c009d4"],"x":355,"y":860,"wires":[]},{"id":"8f3dec24.dbfdf","type":"comment","z":"fee7e1b3.12649","name":"running_state_heat","info":"","x":710,"y":340,"wires":[]},{"id":"6e2abd7f.3dfd84","type":"comment","z":"fee7e1b3.12649","name":"system_mode_heat","info":"","x":710,"y":540,"wires":[]},{"id":"615f4d01.2f7a44","type":"comment","z":"fee7e1b3.12649","name":"system_mode_water","info":"","x":730,"y":580,"wires":[]},{"id":"d585d1b6.0ac7","type":"link out","z":"fee7e1b3.12649","name":"system_mode","links":["271079a9.a12896"],"x":595,"y":500,"wires":[]},{"id":"26f1cd25.2f25c2","type":"comment","z":"fee7e1b3.12649","name":"system_mode","info":"","x":690,"y":500,"wires":[]},{"id":"271079a9.a12896","type":"link in","z":"fee7e1b3.12649","name":"system_mode","links":["d585d1b6.0ac7"],"x":75,"y":1100,"wires":[["e5e8133b.0c12f","ab8e108b.adbd"]]},{"id":"b0467163.9f43b","type":"link out","z":"fee7e1b3.12649","name":"temperature_setpoint_hold_heat","links":["7ad003b2.ca4c4c"],"x":595,"y":420,"wires":[]},{"id":"7fd7c7d1.833168","type":"comment","z":"fee7e1b3.12649","name":"temperature_setpoint_hold_heat","info":"","x":750,"y":420,"wires":[]},{"id":"6facb141.0b139","type":"link out","z":"fee7e1b3.12649","name":"temperature_setpoint_hold_water","links":["45e0fd99.7672a4"],"x":615,"y":460,"wires":[]},{"id":"e61221ec.ecac9","type":"comment","z":"fee7e1b3.12649","name":"temperature_setpoint_hold_water","info":"","x":770,"y":460,"wires":[]},{"id":"45e0fd99.7672a4","type":"link in","z":"fee7e1b3.12649","name":"temperature_setpoint_hold_water","links":["6facb141.0b139"],"x":955,"y":1000,"wires":[["149e49d0.927566"]]},{"id":"7ad003b2.ca4c4c","type":"link in","z":"fee7e1b3.12649","name":"temperature_setpoint_hold_heat","links":["b0467163.9f43b"],"x":75,"y":1000,"wires":[["909ad94e.680018"]]},{"id":"abcead2a.50ca5","type":"link out","z":"fee7e1b3.12649","name":"occupied_heating_setpoint_water","links":["8ff8d951.4ff978"],"x":615,"y":300,"wires":[]},{"id":"8c599ebb.02576","type":"comment","z":"fee7e1b3.12649","name":"occupied_heating_setpoint_water","info":"","x":770,"y":300,"wires":[]},{"id":"8ff8d951.4ff978","type":"link in","z":"fee7e1b3.12649","name":"occupied_heating_setpoint_water","links":["1e77e24b.36c2ee","abcead2a.50ca5"],"x":955,"y":800,"wires":[["c899fd79.7592f"]]},{"id":"6c63bae0.1995c4","type":"comment","z":"fee7e1b3.12649","name":"Domoticz device handlers below here - (flows may be removed if Domoticz not used)","info":"","x":370,"y":1800,"wires":[]},{"id":"ad2eb69d.be1ac8","type":"comment","z":"fee7e1b3.12649","name":"Heat and Hot Water On/Off buttons - trigger relevant mqqt messages","info":"","x":660,"y":1600,"wires":[]},{"id":"2c6991db.1d908e","type":"comment","z":"fee7e1b3.12649","name":"CH and HW system_mode","info":"","x":690,"y":1300,"wires":[]},{"id":"72bf77e8.7d6098","type":"comment","z":"fee7e1b3.12649","name":"Display CH and HW Thermostat Sliders","info":"","x":590,"y":800,"wires":[]},{"id":"45541837.c04ed8","type":"comment","z":"fee7e1b3.12649","name":"Display Thermostat Temperature Gauge and Value","info":"","x":590,"y":680,"wires":[]},{"id":"9743bb41.ba5b28","type":"comment","z":"fee7e1b3.12649","name":"set system_mode - off/auto/heat","info":"","x":530,"y":1100,"wires":[]},{"id":"4213f520.c66afc","type":"link in","z":"fee7e1b3.12649","name":"Controller/heat/set/system_mode","links":["d4c85c03.5c295"],"x":1035,"y":300,"wires":[["d31ec248.f8c05"]]},{"id":"d4c85c03.5c295","type":"link out","z":"fee7e1b3.12649","name":"Controller/heat/set/system_mode","links":["4213f520.c66afc"],"x":375,"y":1140,"wires":[]},{"id":"c52ab0a8.1d7b","type":"comment","z":"fee7e1b3.12649","name":"Display CH and HW running_state and temperature_setpoint_hold values","info":"","x":660,"y":960,"wires":[]},{"id":"b7c3814c.8b06d","type":"comment","z":"fee7e1b3.12649","name":"mqqt publish topics (set mqqt details here)","info":"","x":1180,"y":60,"wires":[]},{"id":"9f8523db.38d1b","type":"comment","z":"fee7e1b3.12649","name":"mqqt subscribe topics (set mqqt details here)","info":"","x":230,"y":200,"wires":[]},{"id":"67524c7e.4228a4","type":"mqtt-broker","name":"mqtt-broker","broker":"mqtt","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"528c2d5b.1dbed4","type":"ui_group","name":"SLR2/SLT2","tab":"d8350b26.c19d28","order":1,"disp":true,"width":"6","collapse":false},{"id":"f8a0519b.03b43","type":"ui_group","name":"CH","tab":"d8350b26.c19d28","order":2,"disp":true,"width":"6","collapse":false},{"id":"b3d99634.37a618","type":"ui_group","name":"HW","tab":"d8350b26.c19d28","order":3,"disp":true,"width":"6","collapse":false},{"id":"d8350b26.c19d28","type":"ui_tab","name":"CH/HW Controller","icon":"dashboard","order":8,"disabled":false,"hidden":false}]
